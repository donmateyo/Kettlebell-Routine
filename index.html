<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />

    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, maximum-scale=1.0,
      user-scalable=no, viewport-fit=cover"
    />

    <title>Simple & Sinister</title>

    <!-- PWA Meta -->
    <meta
      name="description"
      content="Progressive kettlebell workout app for Simple & Sinister training"
    />
    <meta name="theme-color" content="#5D5CDE" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta
      name="apple-mobile-web-app-status-bar-style"
      content="black-translucent"
    />
    <meta name="apple-mobile-web-app-title" content="S&S Workout" />

    <!-- Generate a beautiful icon and manifest (single-file, data URLs) -->
    <script>
      (function generateIconsAndManifest() {
        function drawIcon(size) {
          const c = document.createElement("canvas");
          c.width = c.height = size;
          const ctx = c.getContext("2d");

          // Background gradient
          const g = ctx.createLinearGradient(0, 0, size, size);
          g.addColorStop(0, "#5D5CDE");
          g.addColorStop(1, "#3B82F6");
          ctx.fillStyle = g;
          ctx.fillRect(0, 0, size, size);

          // Subtle vignette for depth
          const vg = ctx.createRadialGradient(
            size * 0.5,
            size * 0.55,
            size * 0.1,
            size * 0.5,
            size * 0.55,
            size * 0.75
          );
          vg.addColorStop(0, "rgba(0,0,0,0)");
          vg.addColorStop(1, "rgba(0,0,0,0.14)");
          ctx.fillStyle = vg;
          ctx.fillRect(0, 0, size, size);

          // Kettlebell silhouette with soft shadow
          ctx.save();
          const s = size / 512;
          ctx.scale(s, s);
          ctx.shadowColor = "rgba(0,0,0,0.25)";
          ctx.shadowBlur = 24;
          ctx.shadowOffsetY = 12;
          ctx.fillStyle = "rgba(255,255,255,0.96)";

          const handle = new Path2D(
            "M176 176c0-44.2 35.8-80 80-80s80 35.8 80 80c0 12.2-2.8 23.7-7.8 33.9h-40.4c10.5-8.8 16.8-22 16.8-36.6 0-26.5-21.5-48-48-48s-48 21.5-48 48c0 14.6 6.3 27.8 16.8 36.6H183.8c-5-10.2-7.8-21.7-7.8-33.9z"
          );
          const body = new Path2D(
            "M128 320c0-53 43-96 96-96h64c53 0 96 43 96 96v8c0 69.6-56.4 128-126 128h-4c-69.6 0-126-58.4-126-128v-8z"
          );
          ctx.fill(handle);
          ctx.fill(body);
          ctx.restore();

          // Soft top-left gloss
          const gloss = ctx.createRadialGradient(
            size * 0.28,
            size * 0.24,
            0,
            size * 0.28,
            size * 0.24,
            size * 0.36
          );
          gloss.addColorStop(0, "rgba(255,255,255,0.38)");
          gloss.addColorStop(1, "rgba(255,255,255,0)");
          ctx.fillStyle = gloss;
          ctx.beginPath();
          ctx.arc(size * 0.28, size * 0.24, size * 0.36, 0, Math.PI * 2);
          ctx.fill();

          return c.toDataURL("image/png");
        }

        // Generate sizes
        const icon180 = drawIcon(180); // iOS Home Screen
        const icon192 = drawIcon(192); // Android
        const icon512 = drawIcon(512); // Android large / maskable

        // Inject apple-touch-icon
        const apple = document.createElement("link");
        apple.rel = "apple-touch-icon";
        apple.href = icon180;
        document.head.appendChild(apple);

        // Favicon (nice to have)
        const fav = document.createElement("link");
        fav.rel = "icon";
        fav.type = "image/png";
        fav.href = icon192;
        document.head.appendChild(fav);

        // Manifest with inlined icons
        const manifest = {
          name: "Simple & Sinister Workout",
          short_name: "S&S Workout",
          start_url: "/",
          scope: "/",
          display: "standalone",
          background_color: "#0f172a",
          theme_color: "#5D5CDE",
          description:
            "Progressive kettlebell workout app for Simple & Sinister training",
          icons: [
            {
              src: icon192,
              sizes: "192x192",
              type: "image/png"
            },
            {
              src: icon512,
              sizes: "512x512",
              type: "image/png",
              purpose: "any maskable"
            }
          ]
        };

        const blob = new Blob([JSON.stringify(manifest)], {
          type: "application/json"
        });
        const url = URL.createObjectURL(blob);
        const link = document.createElement("link");
        link.rel = "manifest";
        link.href = url;
        document.head.appendChild(link);
      })();
    </script>

    <!-- Tailwind CDN (kept for simplicity; single-file app code, external CSS) -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
      tailwind.config = {
        darkMode: "class",
        theme: {
          extend: {
            colors: {
              primary: "#10B981",
              "primary-dark": "#059669",
              secondary: "#3B82F6",
              accent: "#F59E0B",
              glass: "rgba(255, 255, 255, 0.1)",
              "glass-border": "rgba(255, 255, 255, 0.2)"
            },
            backdropBlur: {
              xs: "2px"
            }
          }
        }
      };
    </script>

    <style>
      /* Prevent zoom on iOS */
      input,
      select,
      textarea {
        font-size: 16px !important;
      }

      /* Glass morphism styles */
      .glass {
        background: rgba(255, 255, 255, 0.1);
        backdrop-filter: blur(20px);
        border: 1px solid rgba(255, 255, 255, 0.2);
        box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
      }

      .glass-dark {
        background: rgba(0, 0, 0, 0.2);
        backdrop-filter: blur(20px);
        border: 1px solid rgba(255, 255, 255, 0.1);
        box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
      }

      /* Gradient background */
      body {
        background: linear-gradient(
          135deg,
          #1f2937 0%,
          #111827 50%,
          #0f172a 100%
        );
        min-height: 100vh;
      }

      body.dark {
        background: linear-gradient(
          135deg,
          #0f172a 0%,
          #1e293b 50%,
          #374151 100%
        );
      }

      /* Custom styles for better mobile experience */
      .timer-display {
        font-variant-numeric: tabular-nums;
      }

      .pulse-ring {
        animation: pulse-ring 2s
          cubic-bezier(0.455, 0.03, 0.515, 0.955) infinite;
      }

      @keyframes pulse-ring {
        0% {
          transform: scale(0.33);
          opacity: 1;
        }
        80%,
        100% {
          transform: scale(1.33);
          opacity: 0;
        }
      }

      .workout-button {
        transition: all 0.2s ease;
      }

      .workout-button:active {
        transform: scale(0.95);
      }

      .floating-card {
        background: rgba(255, 255, 255, 0.15);
        backdrop-filter: blur(20px);
        border: 1px solid rgba(255, 255, 255, 0.3);
        box-shadow: 0 12px 40px rgba(0, 0, 0, 0.15);
      }

      .dark .floating-card {
        background: rgba(255, 255, 255, 0.05);
        border: 1px solid rgba(255, 255, 255, 0.1);
      }

      /* PWA display mode styles */
      @media all and (display-mode: standalone) {
        body {
          padding-top: env(safe-area-inset-top);
          padding-bottom: env(safe-area-inset-bottom);
        }
      }
    </style>
  </head>

  <body class="text-white min-h-screen">
    <div id="app" class="max-w-md mx-auto">
      <!-- Header -->
      <header
        class="floating-card text-white p-4 text-center relative m-4 rounded-xl"
      >
        <h1 class="text-xl font-bold">Simple &amp; Sinister</h1>
        <div class="flex justify-between items-center mt-2">
          <button
            id="infoBtn"
            class="text-white/80 hover:text-white transition-colors p-2
            rounded-lg hover:bg-white/10"
          >
            <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
              <path
                fill-rule="evenodd"
                d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0
                11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001
                1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z"
                clip-rule="evenodd"
              />
            </svg>
          </button>
          <div class="text-sm font-medium bg-white/20 px-3 py-1 rounded-full">
            <span id="currentWeight">24kg</span>
          </div>
          <button
            id="settingsBtn"
            class="text-white/80 hover:text-white transition-colors p-2
            rounded-lg hover:bg-white/10"
          >
            <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
              <path
                fill-rule="evenodd"
                d="M11.49 3.17c-.38-1.56-2.6-1.56-2.98 0a1.532
                1.532 0 01-2.286.948c-1.372-.836-2.942.734-2.106
                2.106.54.886.061 2.042-.947 2.287-1.561.379-1.561
                2.6 0 2.978a1.532 1.532 0 01.947 2.287c-.836 1.372.734
                2.942 2.106 2.106a1.532 1.532 0 012.287.947c.379 1.561
                2.6 1.561 2.978 0a1.533 1.533 0 012.287-.947c1.372.836
                2.942-.734 2.106-2.106a1.533 1.533 0 01.947-2.287c1.561-.379
                1.561-2.6 0-2.978a1.532 1.532 0 01-.947-2.287c.836-1.372-.734-2.942-2.106-2.106a1.532
                1.532 0 01-2.287-.947zM10 13a3 3 0 100-6 3 3 0 000 6z"
                clip-rule="evenodd"
              />
            </svg>
          </button>
        </div>
      </header>

      <!-- Main Workout Interface -->
      <main class="p-4 space-y-6">
        <!-- Workout Status -->
        <div id="workoutStatus" class="text-center">
          <div class="floating-card rounded-xl p-6">
            <div class="text-2xl font-bold mb-2">Ready to Start</div>
            <div class="text-white/80">100 Swings + 10 Get-ups</div>
          </div>
        </div>

        <!-- Timer Display -->
        <div id="timerDisplay" class="text-center hidden">
          <div class="relative inline-flex items-center justify-center">
            <div
              class="absolute inset-0 rounded-full bg-primary/30 pulse-ring"
            ></div>
            <div
              class="floating-card rounded-full w-36 h-36 flex items-center
              justify-center border-2 border-white/30"
            >
              <div class="text-center">
                <div
                  id="timeRemaining"
                  class="text-3xl font-bold timer-display text-white"
                >
                  0:30
                </div>
                <div id="timerPhase" class="text-xs text-white/70">Swings</div>
              </div>
            </div>
          </div>

          <div class="mt-6 grid grid-cols-2 gap-4 text-sm">
            <div class="floating-card p-4 rounded-xl">
              <div class="text-white/70">Set</div>
              <div id="currentSet" class="text-xl font-bold text-white">
                1/10
              </div>
            </div>
            <div class="floating-card p-4 rounded-xl">
              <div class="text-white/70">Hand</div>
              <div id="currentHand" class="text-xl font-bold text-white">
                Right
              </div>
            </div>
          </div>
        </div>

        <!-- Current Exercise Display -->
        <div id="exerciseDisplay" class="text-center hidden">
          <div
            class="floating-card bg-gradient-to-r from-primary/30
            to-secondary/30 text-white rounded-xl p-6 border-2 border-white/20"
          >
            <div id="exerciseName" class="text-xl font-bold mb-2">
              Kettlebell Swings
            </div>
            <div id="exerciseInstruction" class="text-lg">
              10 swings - Right hand
            </div>
            <div class="text-sm mt-2 text-white/80" id="exerciseReps">
              Switch hands each set
            </div>
          </div>
        </div>

        <!-- Control Buttons -->
        <div class="space-y-3">
          <button
            id="startBtn"
            class="w-full floating-card bg-gradient-to-r from-primary/40
            to-secondary/40 hover:from-primary/60 hover:to-secondary/60
            text-white py-4 rounded-xl text-lg font-semibold workout-button
            transition-all border-2 border-white/30"
          >
            Start Workout
          </button>

          <div id="workoutControls" class="hidden space-y-3">
            <button
              id="pauseBtn"
              class="w-full floating-card bg-gradient-to-r
              from-yellow-500/40 to-yellow-400/40 hover:from-yellow-500/60
              hover:to-yellow-400/60 text-white py-3 rounded-xl font-semibold
              workout-button border-2 border-white/30"
            >
              Pause
            </button>
            <button
              id="stopBtn"
              class="w-full floating-card bg-gradient-to-r
              from-red-500/40 to-red-400/40 hover:from-red-500/60
              hover:to-red-400/60 text-white py-3 rounded-xl font-semibold
              workout-button border-2 border-white/30"
            >
              Stop Workout
            </button>
          </div>
        </div>

        <!-- Progress Summary -->
        <div id="progressSummary" class="floating-card rounded-xl p-5">
          <h3 class="font-semibold mb-3 text-white">Today's Progress</h3>
          <div class="grid grid-cols-2 gap-4 text-sm">
            <div>
              <div class="text-white/70">Swings Completed</div>
              <div id="swingsCompleted" class="text-lg font-bold text-white">
                0/100
              </div>
            </div>
            <div>
              <div class="text-white/70">Get-ups Completed</div>
              <div id="getupsCompleted" class="text-lg font-bold text-white">
                0/10
              </div>
            </div>
          </div>
        </div>
      </main>

      <!-- Settings Modal -->
      <div
        id="settingsModal"
        class="fixed inset-0 bg-black/60 backdrop-blur-sm hidden z-50
        flex items-center justify-center p-4"
      >
        <div
          class="floating-card rounded-xl w-full max-w-sm p-6 text-white
          border-2 border-white/30"
        >
          <div class="flex justify-between items-center mb-4">
            <h2 class="text-lg font-semibold text-white">Settings</h2>
            <button
              id="closeSettings"
              class="text-white/70 hover:text-white transition-colors p-1
              rounded-lg hover:bg-white/10"
            >
              <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                <path
                  fill-rule="evenodd"
                  d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1
                  1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0
                  01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0
                  01-1.414-1.414L8.586 10 4.293 5.707a1 1 0
                  010-1.414z"
                  clip-rule="evenodd"
                />
              </svg>
            </button>
          </div>

          <div class="space-y-4">
            <div>
              <label class="block text-sm font-medium mb-2 text-white/90">
                Kettlebell Weight
              </label>
              <select
                id="weightSelect"
                class="w-full p-3 floating-card border border-white/30
                rounded-lg text-white text-base bg-transparent"
              >
                <option value="16" class="bg-gray-800 text-white">
                  16kg (35 lbs)
                </option>
                <option value="20" class="bg-gray-800 text-white">
                  20kg (44 lbs)
                </option>
                <option value="24" selected class="bg-gray-800 text-white">
                  24kg (53 lbs)
                </option>
                <option value="28" class="bg-gray-800 text-white">
                  28kg (62 lbs)
                </option>
                <option value="32" class="bg-gray-800 text-white">
                  32kg (70 lbs) - Simple Goal
                </option>
                <option value="36" class="bg-gray-800 text-white">
                  36kg (80 lbs)
                </option>
                <option value="40" class="bg-gray-800 text-white">
                  40kg (88 lbs)
                </option>
              </select>
            </div>

            <div>
              <label class="block text-sm font-medium mb-2 text-white/90">
                Sound Alerts
              </label>
              <label class="flex items-center text-white/90">
                <input
                  type="checkbox"
                  id="soundAlerts"
                  checked
                  class="mr-2 w-4 h-4 accent-primary"
                />
                <span>Enable audio cues</span>
              </label>
            </div>
          </div>

          <button
            id="saveSettings"
            class="w-full mt-6 floating-card bg-gradient-to-r
            from-primary/40 to-secondary/40 hover:from-primary/60
            hover:to-secondary/60 text-white py-3 rounded-lg font-semibold
            workout-button border-2 border-white/30"
          >
            Save Settings
          </button>
        </div>
      </div>

      <!-- Info Modal -->
      <div
        id="infoModal"
        class="fixed inset-0 bg-black/60 backdrop-blur-sm hidden z-50
        flex items-center justify-center p-4"
      >
        <div
          class="floating-card rounded-xl w-full max-w-sm p-6
          max-h-[80vh] overflow-y-auto text-white border-2 border-white/30"
        >
          <div class="flex justify-between items-center mb-4">
            <h2 class="text-lg font-semibold text-white">
              Simple &amp; Sinister
            </h2>
            <button
              id="closeInfo"
              class="text-white/70 hover:text-white transition-colors p-1
              rounded-lg hover:bg-white/10"
            >
              <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                <path
                  fill-rule="evenodd"
                  d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1
                  1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0
                  01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0
                  01-1.414-1.414L8.586 10 4.293 5.707a1 1 0
                  010-1.414z"
                  clip-rule="evenodd"
                />
              </svg>
            </button>
          </div>

          <div class="space-y-4 text-sm">
            <div>
              <h3 class="font-semibold mb-2 text-white">Workout Structure</h3>
              <ul class="space-y-1 text-white/80">
                <li>• 5 min: 10 one-hand swings every 30 seconds</li>
                <li>• Switch hands each set</li>
                <li>• 1 minute rest</li>
                <li>• 10 min: 1 get-up each minute</li>
                <li>• Alternate sides each minute</li>
              </ul>
            </div>

            <div>
              <h3 class="font-semibold mb-2 text-white">Simple Goal</h3>
              <p class="text-white/80">
                Complete the workout with 32kg (70 lbs) kettlebell with perfect
                form and timing.
              </p>
            </div>

            <div>
              <h3 class="font-semibold mb-2 text-white">Key Points</h3>
              <ul class="space-y-1 text-white/80">
                <li>• Maintain neutral spine</li>
                <li>• Keep shoulders packed</li>
                <li>• Full hip/knee extension on swings</li>
                <li>• Controlled transitions on get-ups</li>
              </ul>
            </div>

            <div>
              <h3 class="font-semibold mb-2 text-white">Benefits</h3>
              <p class="text-white/80">
                Research shows significant improvements in VO2max, body
                composition, flexibility, and cardiovascular health.
              </p>
            </div>
          </div>
        </div>
      </div>
    </div>

    <script>
      // Dark mode detection
      if (
        window.matchMedia &&
        window.matchMedia("(prefers-color-scheme: dark)").matches
      ) {
        document.documentElement.classList.add("dark");
      }
      window
        .matchMedia("(prefers-color-scheme: dark)")
        .addEventListener("change", (event) => {
          if (event.matches) {
            document.documentElement.classList.add("dark");
          } else {
            document.documentElement.classList.remove("dark");
          }
        });

      // App state
      let workoutState = {
        isActive: false,
        isPaused: false,
        phase: "swings", // 'swings', 'rest', 'getups', 'complete'
        currentSet: 1,
        currentHand: "right",
        timeRemaining: 30,
        swingsCompleted: 0,
        getupsCompleted: 0,
        currentWeight: 24,
        soundEnabled: true
      };

      let timer = null;

      // DOM elements
      const startBtn = document.getElementById("startBtn");
      const pauseBtn = document.getElementById("pauseBtn");
      const stopBtn = document.getElementById("stopBtn");
      const workoutControls = document.getElementById("workoutControls");
      const timerDisplay = document.getElementById("timerDisplay");
      const exerciseDisplay = document.getElementById("exerciseDisplay");
      const workoutStatus = document.getElementById("workoutStatus");
      const timeRemaining = document.getElementById("timeRemaining");
      const timerPhase = document.getElementById("timerPhase");
      const currentSet = document.getElementById("currentSet");
      const currentHand = document.getElementById("currentHand");
      const exerciseName = document.getElementById("exerciseName");
      const exerciseInstruction =
        document.getElementById("exerciseInstruction");
      const exerciseReps = document.getElementById("exerciseReps");
      const swingsCompleted = document.getElementById("swingsCompleted");
      const getupsCompleted = document.getElementById("getupsCompleted");
      const currentWeight = document.getElementById("currentWeight");

      // Modal elements
      const settingsModal = document.getElementById("settingsModal");
      const infoModal = document.getElementById("infoModal");
      const settingsBtn = document.getElementById("settingsBtn");
      const infoBtn = document.getElementById("infoBtn");
      const closeSettings = document.getElementById("closeSettings");
      const closeInfo = document.getElementById("closeInfo");
      const saveSettings = document.getElementById("saveSettings");
      const weightSelect = document.getElementById("weightSelect");
      const soundAlerts = document.getElementById("soundAlerts");

      // Audio context for beeps
      let audioContext = null;

      function initAudio() {
        if (!audioContext) {
          audioContext = new (window.AudioContext ||
            window.webkitAudioContext)();
        }
      }

      function playBeep(frequency = 800, duration = 200) {
        if (!workoutState.soundEnabled || !audioContext) return;

        const oscillator = audioContext.createOscillator();
        const gainNode = audioContext.createGain();

        oscillator.connect(gainNode);
        gainNode.connect(audioContext.destination);

        oscillator.frequency.value = frequency;
        oscillator.type = "sine";

        gainNode.gain.setValueAtTime(0.1, audioContext.currentTime);
        gainNode.gain.exponentialRampToValueAtTime(
          0.01,
          audioContext.currentTime + duration / 1000
        );

        oscillator.start(audioContext.currentTime);
        oscillator.stop(audioContext.currentTime + duration / 1000);
      }

      function formatTime(seconds) {
        const mins = Math.floor(seconds / 60);
        const secs = seconds % 60;
        return `${mins}:${secs.toString().padStart(2, "0")}`;
      }

      function updateDisplay() {
        timeRemaining.textContent = formatTime(workoutState.timeRemaining);
        currentSet.textContent = `${workoutState.currentSet}/10`;
        currentHand.textContent =
          workoutState.currentHand === "right" ? "Right" : "Left";
        swingsCompleted.textContent = `${workoutState.swingsCompleted}/100`;
        getupsCompleted.textContent = `${workoutState.getupsCompleted}/10`;
        currentWeight.textContent = `${workoutState.currentWeight}kg`;

        if (workoutState.phase === "swings") {
          timerPhase.textContent = "Swings";
          exerciseName.textContent = "Kettlebell Swings";
          exerciseInstruction.textContent = `10 swings - ${
            workoutState.currentHand === "right" ? "Right" : "Left"
          } hand`;
          exerciseReps.textContent = "Switch hands each set";
        } else if (workoutState.phase === "rest") {
          timerPhase.textContent = "Rest";
          exerciseName.textContent = "Rest Period";
          exerciseInstruction.textContent = "Prepare for get-ups";
          exerciseReps.textContent = "Stay hydrated";
        } else if (workoutState.phase === "getups") {
          timerPhase.textContent = "Get-ups";
          exerciseName.textContent = "Turkish Get-up";
          exerciseInstruction.textContent = `1 get-up - ${
            workoutState.currentHand === "right" ? "Right" : "Left"
          } side`;
          exerciseReps.textContent = "Alternate sides each minute";
        }
      }

      function startWorkout() {
        initAudio();
        workoutState.isActive = true;
        workoutState.isPaused = false;
        workoutState.phase = "swings";
        workoutState.currentSet = 1;
        workoutState.currentHand = "right";
        workoutState.timeRemaining = 30;
        workoutState.swingsCompleted = 0;
        workoutState.getupsCompleted = 0;

        startBtn.classList.add("hidden");
        workoutControls.classList.remove("hidden");
        timerDisplay.classList.remove("hidden");
        exerciseDisplay.classList.remove("hidden");
        workoutStatus.classList.add("hidden");

        startTimer();
        updateDisplay();
        playBeep(1000, 300);
      }

      function startTimer() {
        if (timer) clearInterval(timer);

        timer = setInterval(() => {
          if (!workoutState.isActive || workoutState.isPaused) return;

          workoutState.timeRemaining--;
          updateDisplay();

          if (
            workoutState.timeRemaining <= 3 &&
            workoutState.timeRemaining > 0
          ) {
            playBeep(600, 150);
          }

          if (workoutState.timeRemaining === 0) {
            handleTimerComplete();
          }
        }, 1000);
      }

      function handleTimerComplete() {
        playBeep(1200, 400);

        if (workoutState.phase === "swings") {
          workoutState.swingsCompleted += 10;

          if (workoutState.currentSet < 10) {
            workoutState.currentSet++;
            workoutState.currentHand =
              workoutState.currentHand === "right" ? "left" : "right";
            workoutState.timeRemaining = 30;
          } else {
            workoutState.phase = "rest";
            workoutState.timeRemaining = 60;
          }
        } else if (workoutState.phase === "rest") {
          workoutState.phase = "getups";
          workoutState.currentSet = 1;
          workoutState.currentHand = "right";
          workoutState.timeRemaining = 60;
        } else if (workoutState.phase === "getups") {
          workoutState.getupsCompleted += 1;

          if (workoutState.currentSet < 10) {
            workoutState.currentSet++;
            workoutState.currentHand =
              workoutState.currentHand === "right" ? "left" : "right";
            workoutState.timeRemaining = 60;
          } else {
            completeWorkout();
            return;
          }
        }

        updateDisplay();
      }

      function completeWorkout() {
        workoutState.isActive = false;
        clearInterval(timer);

        timerDisplay.classList.add("hidden");
        exerciseDisplay.classList.add("hidden");
        workoutControls.classList.add("hidden");
        workoutStatus.classList.remove("hidden");
        startBtn.classList.remove("hidden");

        const statusDiv = workoutStatus.querySelector("div");
        statusDiv.innerHTML = `
          <div class="text-2xl font-bold mb-2 text-green-600
          dark:text-green-400">
            Workout Complete! 🎉
          </div>
          <div class="text-gray-600 dark:text-gray-400">
            100 Swings + 10 Get-ups completed<br>
            Weight: ${workoutState.currentWeight}kg
          </div>
        `;

        playBeep(1500, 500);
      }

      function pauseWorkout() {
        workoutState.isPaused = !workoutState.isPaused;
        pauseBtn.textContent = workoutState.isPaused ? "Resume" : "Pause";
        pauseBtn.className = workoutState.isPaused
          ? "w-full bg-green-500 hover:bg-green-600 text-white py-3 rounded-lg font-semibold workout-button"
          : "w-full bg-yellow-500 hover:bg-yellow-600 text-white py-3 rounded-lg font-semibold workout-button";
      }

      function stopWorkout() {
        showConfirmDialog(
          "Are you sure you want to stop the workout?",
          () => {
            workoutState.isActive = false;
            workoutState.isPaused = false;
            clearInterval(timer);

            timerDisplay.classList.add("hidden");
            exerciseDisplay.classList.add("hidden");
            workoutControls.classList.add("hidden");
            workoutStatus.classList.remove("hidden");
            startBtn.classList.remove("hidden");

            const statusDiv = workoutStatus.querySelector("div");
            statusDiv.innerHTML = `
              <div class="text-2xl font-bold mb-2">Ready to Start</div>
              <div class="text-gray-600 dark:text-gray-400">
                100 Swings + 10 Get-ups
              </div>
            `;

            pauseBtn.textContent = "Pause";
            pauseBtn.className =
              "w-full bg-yellow-500 hover:bg-yellow-600 text-white py-3 rounded-lg font-semibold workout-button";
          }
        );
      }

      function showConfirmDialog(message, onConfirm) {
        const modal = document.createElement("div");
        modal.className =
          "fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center " +
          "justify-center z-50 p-4";
        modal.innerHTML = `
          <div class="floating-card rounded-xl p-6 max-w-sm w-full text-white border-2 border-white/30">
            <p class="text-white/90 mb-4">${message}</p>
            <div class="flex justify-end space-x-3">
              <button class="cancel-btn px-4 py-2 text-white/70 hover:text-white hover:bg-white/10 rounded-lg transition-colors">Cancel</button>
              <button class="confirm-btn px-4 py-2 bg-red-500/60 text-white hover:bg-red-500/80 rounded-lg transition-colors">Confirm</button>
            </div>
          </div>
        `;

        modal.querySelector(".cancel-btn").onclick = () => modal.remove();
        modal.querySelector(".confirm-btn").onclick = () => {
          modal.remove();
          onConfirm();
        };

        document.body.appendChild(modal);
      }

      // Events
      document.getElementById("startBtn").addEventListener("click", startWorkout);
      document.getElementById("pauseBtn").addEventListener("click", pauseWorkout);
      document.getElementById("stopBtn").addEventListener("click", stopWorkout);

      document
        .getElementById("settingsBtn")
        .addEventListener("click", () => {
          settingsModal.classList.remove("hidden");
        });

      document
        .getElementById("closeSettings")
        .addEventListener("click", () => {
          settingsModal.classList.add("hidden");
        });

      document.getElementById("saveSettings").addEventListener("click", () => {
        workoutState.currentWeight = parseInt(
          document.getElementById("weightSelect").value
        );
        workoutState.soundEnabled =
          document.getElementById("soundAlerts").checked;
        updateDisplay();
        settingsModal.classList.add("hidden");
      });

      document.getElementById("infoBtn").addEventListener("click", () => {
        infoModal.classList.remove("hidden");
      });

      document.getElementById("closeInfo").addEventListener("click", () => {
        infoModal.classList.add("hidden");
      });

      settingsModal.addEventListener("click", (e) => {
        if (e.target === settingsModal) {
          settingsModal.classList.add("hidden");
        }
      });

      infoModal.addEventListener("click", (e) => {
        if (e.target === infoModal) {
          infoModal.classList.add("hidden");
        }
      });

      // Initialize display
      updateDisplay();
    </script>
  </body>
</html>
